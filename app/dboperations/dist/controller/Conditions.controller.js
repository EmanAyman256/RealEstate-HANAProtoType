sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/json/JSONModel"],function(o,t,n,i){"use strict";return o.extend("dboperations.controller.Conditions",{onInit:function(){this._loadConditions()},_loadConditions:function(){fetch("./odata/v4/real-estate/Conditions").then(o=>o.json()).then(o=>{this.getView().setModel(new i(o.value||[]),"conditions")}).catch(o=>console.error("Failed to load Conditions:",o))},onAddCondition:function(){this._openConditionDialog({})},onEditCondition:function(o){const t=o.getSource().getBindingContext("conditions");const n=t.getObject();this._openConditionDialog(n)},_openConditionDialog:function(o){if(!this._oDialog){this._oDialog=this.getView().byId("conditionDialog")}const t=new i({code:o.code||"",description:o.description||"",ID:o.ID||null,isEdit:!!o.code});this._oDialog.setModel(t,"local");this._oDialog.open()},onSaveCondition:async function(){const o=this._oDialog;const i=o.getModel("local");const e=i.getData();if(!e.code||!e.description){n.error("Code and Description are required.");return}try{const n={code:e.code,description:e.description};const i=e.isEdit?"PUT":"POST";const s=e.isEdit?`./odata/v4/real-estate/Conditions(ID='${e.ID}')`:`./odata/v4/real-estate/Conditions`;const d=await fetch(s,{method:i,headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!d.ok)throw new Error("Failed to save Condition");t.show("Condition saved successfully!");o.close();this._loadConditions()}catch(o){n.error("Error: "+o.message)}},onCancelCondition:function(){this._oDialog.close()},onDeleteCondition:function(o){const i=o.getSource().getBindingContext("conditions");const e=i.getObject();n.confirm(`Delete Condition ${e.code}?`,{onClose:async o=>{if(o==="OK"){try{const o=await fetch(`./odata/v4/real-estate/Conditions(ID='${e.ID}')`,{method:"DELETE"});if(!o.ok)throw new Error("Delete failed");t.show("Deleted successfully");this._loadConditions()}catch(o){n.error(o.message)}}}})}})});
//# sourceMappingURL=Conditions.controller.js.map