{"version":3,"file":"PaymentPlanSimulations.controller.js","names":["sap","ui","define","Controller","MessageToast","MessageBox","JSONModel","extend","onInit","this","getView","setModel","_loadUnits","_loadDropdownData","_idCounter","parseInt","localStorage","getItem","onOpenUnitValueHelp","oView","_oUnitValueHelp","m","SelectDialog","title","items","path","template","StandardListItem","description","search","oEvent","sValue","getParameter","aFilters","model","Filter","FilterOperator","Contains","getSource","getBinding","filter","confirm","oSelectedItem","oContext","getBindingContext","oUnit","getObject","unitId","desc","unitDescription","oLocalModel","getModel","setProperty","oUnitInput","byId","setValue","_onUnitSelected","bind","liveChange","addDependent","open","selectedUnitId","onUnitChange","selectedItem","getKey","fetch","then","res","json","data","value","console","log","oComboBox","refresh","catch","err","error","async","projectsRes","plansRes","Promise","all","projects","plans","oSelItem","getSelectedKey","oLocal","getProperty","warn","oUnitsModel","aUnits","getData","oSelectedUnit","find","u","projectId","project","projectDescription","conditionsRes","conditions","aConditions","finalPrice","reduce","sum","c","amt","Number","amount","onPricePlanChange","pricePlanYears","getValue","oPlansModel","aPlans","oSelectedPlan","p","planYears","Array","isArray","assignedProjects","some","ap","paymentPlanId","onSimulate","NaN","leadId","userId","matchingPlan","isNaN","scheduleRes","scheduleData","aSchedules","simulationSchedule","today","Date","forEach","schedule","basePriceCode","basePrice","code","condition","baseAmount","percentage","interval","_getFrequencyInterval","frequency","conditionType","i","numberOfInstallments","monthsToAdd","dueInMonth","dueDate","getTime","push","toISOString","split","maintenance","Math","max","oTable","simulationId","_generateId","message","frequencyDesc","toLowerCase","onSaveSimulation","payload","map","s","method","headers","body","JSON","stringify","ok","Error","show","setItem","paddedNumber","slice"],"sources":["PaymentPlanSimulations-dbg.controller.js"],"mappings":"AAAAA,IAAIC,GAAGC,OAAO,CACV,6BACA,qBACA,mBACA,+BACD,SAAUC,EAAYC,EAAcC,EAAYC,GAC/C,aAEA,OAAOH,EAAWI,OAAO,iDAAkD,CAEvEC,OAAQ,WAEJC,KAAKC,UAAUC,SAAS,IAAIL,EAAU,CAAC,GAAI,SAC3CG,KAAKC,UAAUC,SAAS,IAAIL,EAAU,IAAK,oBAG3CG,KAAKG,aACLH,KAAKI,oBACLJ,KAAKK,WAAaC,SAASC,aAAaC,QAAQ,yBAA2B,CAC/E,EAKAC,oBAAqB,WACjB,MAAMC,EAAQV,KAAKC,UAEnB,IAAKD,KAAKW,gBAAiB,CACvBX,KAAKW,gBAAkB,IAAIpB,IAAIqB,EAAEC,aAAa,CAC1CC,MAAO,cACPC,MAAO,CACHC,KAAM,UACNC,SAAU,IAAI1B,IAAIqB,EAAEM,iBAAiB,CACjCJ,MAAO,0BACPK,YAAa,oBAGrBC,OAAQ,SAAUC,GACd,MAAMC,EAASD,EAAOE,aAAa,UAAY,GAC/C,MAAMC,EAAW,CACb,IAAIjC,IAAIC,GAAGiC,MAAMC,OAAO,kBAAmBnC,IAAIC,GAAGiC,MAAME,eAAeC,SAAUN,GACjF,IAAI/B,IAAIC,GAAGiC,MAAMC,OAAO,SAAUnC,IAAIC,GAAGiC,MAAME,eAAeC,SAAUN,IAG5ED,EAAOQ,YAAYC,WAAW,SAASC,OAAO,IAAIxC,IAAIC,GAAGiC,MAAMC,OAAOF,EAAU,OACpF,EACAQ,QAAS,SAAUX,GACf,MAAMY,EAAgBZ,EAAOE,aAAa,gBAC1C,GAAIU,EAAe,CACf,MAAMC,EAAWD,EAAcE,kBAAkB,SACjD,MAAMC,EAAQF,EAASG,YACvB,MAAMC,EAASF,EAAME,OACrB,MAAMC,EAAOH,EAAMI,gBAGnB,MAAMC,EAAc/B,EAAMgC,SAAS,SACnCD,EAAYE,YAAY,UAAWL,GAGnC,MAAMM,EAAalC,EAAMmC,KAAK,eAC9B,GAAID,EAAY,CACZA,EAAWE,SAAS,GAAGP,MAASD,KACpC,CAGAtC,KAAK+C,gBAAgBT,EACzB,CACJ,EAAEU,KAAKhD,MACPiD,WAAY,SAAU5B,GAGlB,MAAMC,EAASD,EAAOE,aAAa,UAAY,GAC/C,MAAMC,EAAW,CACb,IAAIjC,IAAIC,GAAGiC,MAAMC,OAAO,kBAAmBnC,IAAIC,GAAGiC,MAAME,eAAeC,SAAUN,GACjF,IAAI/B,IAAIC,GAAGiC,MAAMC,OAAO,SAAUnC,IAAIC,GAAGiC,MAAME,eAAeC,SAAUN,IAE5ED,EAAOQ,YAAYC,WAAW,SAASC,OAAO,IAAIxC,IAAIC,GAAGiC,MAAMC,OAAOF,EAAU,OACpF,IAEJd,EAAMwC,aAAalD,KAAKW,gBAC5B,CAEAX,KAAKW,gBAAgBwC,MACzB,EAGAJ,gBAAiB,SAAUK,GAEvBpD,KAAKqD,aAAa,CACd9B,aAAc,KAAM,CAAG+B,aAAc,CAAEC,OAAQ,IAAMH,MAE7D,EAKAjD,WAAY,WACRqD,MAAM,gDACDC,KAAKC,GAAOA,EAAIC,QAChBF,KAAKG,IACF5D,KAAKC,UAAUC,SAAS,IAAIL,EAAU+D,EAAKC,OAAS,IAAK,SACzDC,QAAQC,IAAI,gBAAiBH,GAG7B,MAAMI,EAAYhE,KAAKC,UAAU4C,KAAK,gBACtC,GAAImB,GAAaA,EAAUlC,WAAW,SAAU,CAC5CkC,EAAUlC,WAAW,SAASmC,SAClC,IAEHC,MAAMC,GAAOL,QAAQM,MAAM,wBAAyBD,GAC7D,EAEA/D,kBAAmBiE,iBACf,IACI,MAAOC,EAAaC,SAAkBC,QAAQC,IAAI,CAC9CjB,MAAM,mCACNA,MAAM,mFAEV,MAAMkB,QAAiBJ,EAAYX,OACnC,MAAMgB,QAAcJ,EAASZ,OAE7B3D,KAAKC,UAAUC,SAAS,IAAIL,EAAU6E,EAASb,OAAS,IAAK,YAC7D7D,KAAKC,UAAUC,SAAS,IAAIL,EAAU8E,EAAMd,OAAS,IAAK,eAC9D,CAAE,MAAOM,GACLL,QAAQM,MAAM,gCAAiCD,EACnD,CACJ,EAMAd,aAAcgB,eAAgBhD,GAE1B,IAAI+B,EAAiB,KAGrB,GAAI/B,UAAiBA,EAAOE,eAAiB,WAAY,CACrD,MAAMqD,EAAWvD,EAAOE,aAAa,gBACrC,GAAIqD,UAAmBA,EAASrB,SAAW,WAAY,CACnDH,EAAiBwB,EAASrB,QAC9B,CACJ,CAGA,IAAKH,EAAgB,CACjB,MAAMY,EAAYhE,KAAKC,UAAU4C,KAAK,gBACtC,GAAImB,UAAoBA,EAAUa,iBAAmB,WAAY,CAC7DzB,EAAiBY,EAAUa,gBAC/B,CACJ,CAGA,IAAKzB,EAAgB,CACjB,MAAM0B,EAAS9E,KAAKC,UAAUyC,SAAS,SACvCU,EAAiB0B,EAASA,EAAOC,YAAY,WAAa,IAC9D,CAEA,IAAK3B,EAAgB,CACjBU,QAAQkB,KAAK,mCACb,MACJ,CAEA,MAAMC,EAAcjF,KAAKC,UAAUyC,SAAS,SAC5C,MAAMwC,EAASD,EAAcA,EAAYE,UAAY,GACrD,MAAMC,GAAiBF,GAAU,IAAIG,KAAKC,GAAKA,EAAEhD,SAAWc,GAC5DU,QAAQC,IAAI,iBAAkBqB,GAE9B,GAAIA,EAAe,CACf,MAAMG,EAAYH,EAAcI,SAASD,WAAaH,EAAcG,UACpE,MAAME,EAAqBL,EAAcI,SAASC,oBAAsBL,EAAcK,mBAEtF,GAAIF,EAAW,CACX,MAAM9C,EAAczC,KAAKC,UAAUyC,SAAS,SAC5CD,EAAYE,YAAY,aAAc4C,GACtC9C,EAAYE,YAAY,sBAAuB8C,GAG/C,IACI,MAAMC,QAAsBlC,MAAM,6DAA6DJ,MAC/F,MAAMuC,QAAmBD,EAAc/B,OACvC,MAAMiC,EAAcD,EAAW9B,OAAS,GACxCC,QAAQC,IAAI,uBAAwB6B,GAEpC,MAAMC,GAAcD,GAAe,IAAIE,OAAO,CAACC,EAAKC,KAChD,MAAMC,EAAMC,OAAOF,EAAEG,SAAW,EAChC,OAAOJ,EAAME,GACd,GAEHxD,EAAYE,YAAY,cAAekD,GACvC/B,QAAQC,IAAI,sBAAuB8B,EACvC,CAAE,MAAO1B,GACLL,QAAQM,MAAM,mCAAoCD,EACtD,CACJ,KAAO,CACHL,QAAQkB,KAAK,oCACjB,CACJ,KAAO,CACHlB,QAAQkB,KAAK,0CACjB,CACJ,EAKAoB,kBAAmB,SAAU/E,GACzB,MAAMgF,EAAiB/F,SAASe,EAAOE,aAAa,UACpD,MAAMgE,EAAYvF,KAAKC,UAAU4C,KAAK,kBAAkByD,WACxD,MAAMC,EAAcvG,KAAKC,UAAUyC,SAAS,gBAC5C,MAAM8D,EAASD,EAAcA,EAAYpB,UAAY,GAErD,MAAMsB,GAAiBD,GAAU,IAAInB,KAAKqB,GACtCA,EAAEC,YAAcN,GAChBO,MAAMC,QAAQH,EAAEI,mBAChBJ,EAAEI,iBAAiBC,KAAKC,GAAMA,EAAGxB,SAASD,YAAcA,IAG5D,GAAIkB,EAAe,CACfzG,KAAKC,UAAU4C,KAAK,sBAAsBC,SAAS2D,EAAcQ,cACrE,KAAO,CAEHjH,KAAKC,UAAU4C,KAAK,sBAAsBC,SAAS,GACvD,CACJ,EAMAoE,WAAY7C,iBACR,SAGA,MAAMS,EAAS9E,KAAKC,UAAUyC,SAAS,SACvC,MAAMJ,EAASwC,EAASA,EAAOC,YAAY,WAAa,KACxD,MAAMc,EAAaf,EAASoB,OAAOpB,EAAOC,YAAY,gBAAkBoC,IAExE,MAAM5B,EAAYvF,KAAKC,UAAU4C,KAAK,kBAAkByD,WACxD,MAAMW,EAAgBjH,KAAKC,UAAU4C,KAAK,sBAAsByD,WAChE,MAAMD,EAAiB/F,SAASN,KAAKC,UAAU4C,KAAK,kBAAkByD,YACtE,MAAMc,EAASpH,KAAKC,UAAU4C,KAAK,eAAeyD,WAClD,MAAMe,EAAS,cAGf,IAAK/E,EAAQ,CACT1C,EAAWwE,MAAM,yBACjB,MACJ,CAGA,MAAMmC,EAAcvG,KAAKC,UAAUyC,SAAS,gBAC5C,MAAM8D,EAASD,EAAcA,EAAYpB,UAAY,GACrD,MAAMmC,EAAed,EAAOnB,KAAKqB,GAC7BA,EAAEC,YAAcN,GAChBO,MAAMC,QAAQH,EAAEI,mBAChBJ,EAAEI,iBAAiBC,KAAKC,GAAMA,EAAGxB,SAASD,YAAcA,IAG5D,IAAK+B,EAAc,CACf1H,EAAWwE,MAAM,oGACjB,MACJ,CAGA,IAAK6C,EAAe,CAChBrH,EAAWwE,MAAM,kEACjB,MACJ,CAGA,IAAKyB,GAAc0B,MAAM1B,GAAa,CAClCjG,EAAWwE,MAAM,kDACjB,MACJ,CAEA,IAEI,MAAMoD,QAAoBhE,MAAM,qFAAqFyD,gDACrH,MAAMQ,QAAqBD,EAAY7D,OACvC,MAAM+D,EAAaD,EAAa5D,OAAS,GAGzC,MAAM6B,QAAsBlC,MAAM,6DAA6DlB,MAC/F,MAAMqD,QAAmBD,EAAc/B,OACvC,MAAMiC,EAAcD,EAAW9B,OAAS,GAGxC,MAAM8D,EAAqB,GAC3B,MAAMC,EAAQ,IAAIC,KAElBH,EAAWI,QAAQC,IACf,MAAMC,EAAgBD,EAASE,WAAWC,KAC1C,MAAMC,EAAYvC,EAAYP,KAAKW,GAAKA,EAAEkC,OAASF,GACnD,MAAMI,EAAaD,EAAYjC,OAAOiC,EAAUhC,QAAU,EAC1D,MAAMA,EAAUiC,EAAaL,EAASM,WAAc,IACpD,MAAMC,EAAWtI,KAAKuI,sBAAsBR,EAASS,WAAWrH,aAGhE,GAAI4G,EAASU,eAAetH,cAAgB,cAAe,CACvD,IAAK,IAAIuH,EAAI,EAAGA,GAAKX,EAASY,sBAAwB,GAAID,IAAK,CAC3D,MAAME,EAAcb,EAASc,WAAaH,EAAIJ,EAC9C,MAAMQ,EAAU,IAAIjB,KAAKD,EAAMmB,UAAYH,EAAc,GAAK,GAAK,GAAK,GAAK,KAC7EjB,EAAmBqB,KAAK,CACpBP,cAAeV,EAASU,cAActH,YACtC2H,QAASA,EAAQG,cAAcC,MAAM,KAAK,GAC1C/C,OAAQ,EACRgD,YAAchD,EAASiD,KAAKC,IAAI,EAAGtB,EAASY,uBAEpD,CACJ,KAAO,CAEH,IAAK,IAAID,EAAI,EAAGA,GAAKX,EAASY,sBAAwB,GAAID,IAAK,CAC3D,MAAME,EAAcb,EAASc,WAAaH,EAAIJ,EAC9C,MAAMQ,EAAU,IAAIjB,KAAKD,EAAMmB,UAAYH,EAAc,GAAK,GAAK,GAAK,GAAK,KAC7EjB,EAAmBqB,KAAK,CACpBP,cAAeV,EAASU,eAAetH,aAAe,cACtD2H,QAASA,EAAQG,cAAcC,MAAM,KAAK,GAC1C/C,OAASA,EAASiD,KAAKC,IAAI,EAAGtB,EAASY,sBACvCQ,YAAa,GAErB,CACJ,IAIJnJ,KAAKC,UAAUC,SAAS,IAAIL,EAAU8H,GAAqB,oBAG3D,MAAM2B,EAAStJ,KAAKC,UAAU4C,KAAK,mBACnC,GAAIyG,GAAUA,EAAOxH,WAAW,SAAU,CACtCwH,EAAOxH,WAAW,SAASmC,SAC/B,CAGA,MAAMsF,EAAevJ,KAAKwJ,cAC1BxJ,KAAKC,UAAU4C,KAAK,qBAAqBC,SAASyG,GAClDzE,EAAOnC,YAAY,gBAAiB4G,EAExC,CAAE,MAAOpF,GACLvE,EAAWwE,MAAM,uBAAyBD,EAAIsF,SAAWtF,GAC7D,CACJ,EAIAoE,sBAAuB,SAAUmB,GAC7B,IAAKA,EAAe,OAAO,GAC3B,OAAQA,EAAcC,eAClB,IAAK,UACD,OAAO,EACX,IAAK,YACD,OAAO,EACX,IAAK,cACD,OAAO,EACX,IAAK,SACD,OAAO,GACX,QACI,OAAO,GAEnB,EAOAC,iBAAkBvF,iBACd,MAAMkF,EAAevJ,KAAKC,UAAU4C,KAAK,qBAAqByD,WAG9D,MAAMxB,EAAS9E,KAAKC,UAAUyC,SAAS,SACvC,MAAMJ,EAASwC,EAASA,EAAOC,YAAY,WAAa,KAExD,MAAMQ,EAAYvF,KAAKC,UAAU4C,KAAK,kBAAkByD,WACxD,MAAMW,EAAgBjH,KAAKC,UAAU4C,KAAK,sBAAsByD,WAChE,MAAMD,EAAiB/F,SAASN,KAAKC,UAAU4C,KAAK,kBAAkByD,YACtE,MAAMc,EAASpH,KAAKC,UAAU4C,KAAK,eAAeyD,WAClD,MAAMT,EAAaK,OAAOpB,EAASA,EAAOC,YAAY,eAAiBoC,KACvE,MAAME,EAAS,cAEf,MAAMU,EAAW/H,KAAKC,UAAUyC,SAAS,oBAAoByC,UAE7D,IACI,MAAM0E,EAAU,CACZN,eACAjH,SACAiD,YACAc,iBACAe,SACAvB,aACAwB,SACAU,UAAWA,GAAY,IAAI+B,IAAIC,IAAK,CAChCtB,cAAesB,EAAEtB,cACjBK,QAASiB,EAAEjB,QACX3C,OAAQ4D,EAAE5D,OACVgD,YAAaY,EAAEZ,gBAIvB,MAAMzF,QAAYF,MAAM,gDAAiD,CACrEwG,OAAQ,OACRC,QAAS,CAAE,eAAgB,oBAC3BC,KAAMC,KAAKC,UAAUP,KAGzB,IAAKnG,EAAI2G,GAAI,MAAM,IAAIC,MAAM,6BAC7B3K,EAAa4K,KAAK,iCACtB,CAAE,MAAOpG,GACLvE,EAAWwE,MAAM,WAAaD,EAAIsF,SAAWtF,GACjD,CACJ,EAEAqF,YAAa,WACTxJ,KAAKK,YAAc,EACnBE,aAAaiK,QAAQ,sBAAuBxK,KAAKK,YACjD,MAAMoK,GAAgB,QAAUzK,KAAKK,YAAYqK,OAAO,GACxD,MAAO,MAAQD,CACnB,GAER","ignoreList":[]}