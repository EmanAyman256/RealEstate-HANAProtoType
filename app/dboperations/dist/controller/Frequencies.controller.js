sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/json/JSONModel"],function(e,o,t,n){"use strict";return e.extend("dboperations.controller.Frequencies",{onInit:function(){this._loadFrequencies()},_loadFrequencies:function(){fetch("./odata/v4/real-estate/Frequencies").then(e=>e.json()).then(e=>{this.getView().setModel(new n(e.value||[]),"frequencies")}).catch(e=>console.error("Failed to load Frequencies:",e))},onAddFrequency:function(){this._openFrequencyDialog({})},onEditFrequency:function(e){const o=e.getSource().getBindingContext("frequencies");const t=o.getObject();this._openFrequencyDialog(t)},_openFrequencyDialog:function(e){if(!this._oDialog){this._oDialog=this.getView().byId("frequencyDialog")}const o=new n({code:e.code||"",description:e.description||"",isEdit:!!e.code});this._oDialog.setModel(o,"local");this._oDialog.open()},onSaveFrequency:async function(){const e=this._oDialog;const n=e.getModel("local");const c=n.getData();if(!c.code||!c.description){t.error("Code and Description are required.");return}try{const t=c.isEdit?"PUT":"POST";const n=c.isEdit?`./odata/v4/real-estate/Frequencies(code='${c.code}')`:`./odata/v4/real-estate/Frequencies`;const i=await fetch(n,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify({code:c.code,description:c.description})});if(!i.ok)throw new Error("Failed to save Frequency");o.show("Frequency saved successfully!");e.close();this._loadFrequencies()}catch(e){t.error("Error: "+e.message)}},onCancelFrequency:function(){this._oDialog.close()},onDeleteFrequency:function(e){const n=e.getSource().getBindingContext("frequencies");const c=n.getObject();t.confirm(`Delete Frequency ${c.code}?`,{onClose:async e=>{if(e==="OK"){try{const e=await fetch(`./odata/v4/real-estate/Frequencies(code='${c.code}')`,{method:"DELETE"});if(!e.ok)throw new Error("Delete failed");o.show("Deleted successfully");this._loadFrequencies()}catch(e){t.error(e.message)}}}})}})});
//# sourceMappingURL=Frequencies.controller.js.map