sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/json/JSONModel"],function(o,e,t,i){"use strict";return o.extend("dboperations.controller.ConditionTypes",{onInit:function(){this._loadConditionTypes()},_loadConditionTypes:function(){fetch("./odata/v4/real-estate/ConditionTypes").then(o=>o.json()).then(o=>{this.getView().setModel(new i(o.value||[]),"conditionTypes")}).catch(o=>console.error("Failed to load ConditionTypes:",o))},onAddConditionType:function(){this._openConditionTypeDialog({})},onEditConditionType:function(o){const e=o.getSource().getBindingContext("conditionTypes");const t=e.getObject();this._openConditionTypeDialog(t)},_openConditionTypeDialog:function(o){if(!this._oDialog){this._oDialog=this.getView().byId("conditionTypeDialog")}const e=new i({code:o.code||"",description:o.description||"",isEdit:!!o.code});this._oDialog.setModel(e,"local");this._oDialog.open()},onSaveConditionType:async function(){const o=this._oDialog;const i=o.getModel("local");const n=i.getData();if(!n.code||!n.description){t.error("Code and Description are required.");return}try{const t=n.isEdit?"PUT":"POST";const i=n.isEdit?`./odata/v4/real-estate/ConditionTypes(code='${n.code}')`:`./odata/v4/real-estate/ConditionTypes`;const s=await fetch(i,{method:t,headers:{"Content-Type":"application/json"},body:JSON.stringify({code:n.code,description:n.description})});if(!s.ok)throw new Error("Failed to save ConditionType");e.show("ConditionType saved successfully!");o.close();this._loadConditionTypes()}catch(o){t.error("Error: "+o.message)}},onCancelConditionType:function(){this._oDialog.close()},onDeleteConditionType:function(o){const i=o.getSource().getBindingContext("conditionTypes");const n=i.getObject();t.confirm(`Delete ConditionType ${n.code}?`,{onClose:async o=>{if(o==="OK"){try{const o=await fetch(`./odata/v4/real-estate/ConditionTypes(code='${n.code}')`,{method:"DELETE"});if(!o.ok)throw new Error("Delete failed");e.show("Deleted successfully");this._loadConditionTypes()}catch(o){t.error(o.message)}}}})}})});
//# sourceMappingURL=ConditionTypes.controller.js.map