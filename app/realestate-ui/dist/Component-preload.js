//@ui5-bundle real/estate/realestateui/Component-preload.js
sap.ui.require.preload({
	"real/estate/realestateui/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","real/estate/realestateui/model/models"],(e,t)=>{"use strict";return e.extend("real.estate.realestateui.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
},
	"real/estate/realestateui/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("real.estate.realestateui.controller.App",{onInit(){}})});
},
	"real/estate/realestateui/controller/View1.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/MessageBox","sap/ui/model/json/JSONModel","sap/m/Dialog","sap/m/List","sap/m/StandardListItem","sap/m/Button"],function(e,t,n,o,i,s,r,a){"use strict";return e.extend("real.estate.realestateui.controller.View1",{onInit:function(){},onFileChange:function(e){const t=e.getParameter("files")[0];if(!t)return;const n=new FileReader;n.onload=e=>{const t=this.byId("siteMapImage");t.setSrc(e.target.result);t.setVisible(true);setTimeout(()=>{const e=t.getDomRef();if(e&&!e._clickAttached){e.addEventListener("click",this.onImageClick.bind(this));e._clickAttached=true}},200)};n.readAsDataURL(t)},onUploadPress:function(){const e=this.byId("fileUploader");if(!e.getValue()){t.show("Please choose an image first.");return}t.show("Image uploaded successfully.")},onImageClick:function(e){const n=e.currentTarget;const o=n.getBoundingClientRect();const i=e.clientX-o.left;const s=e.clientY-o.top;const r=i/o.width*100;const a=s/o.height*100;const l=this.getView().getModel();if(!l){t.show("Error: OData model is not properly initialized.");console.error("OData model is not initialized:",l);return}const c=l.bindList("/Buildings");c.requestContexts().then(e=>{this._regions=e.map(e=>{const t=e.getObject();return{name:t.name,buildingID:t.ID,xMin:t.xMin,xMax:t.xMax,yMin:t.yMin,yMax:t.yMax}});console.log(`Clicked at: X: ${r.toFixed(2)}%, Y: ${a.toFixed(2)}%`);if(!this._regions){t.show("Regions not yet loaded. Please wait.");return}const n=this._regions.find(e=>r>=e.xMin&&r<=e.xMax&&a>=e.yMin&&a<=e.yMax);if(n){this.showUnitsPopup(n.buildingID,n.name);t.show(`Selected ${n.name}`)}else{t.show("No building at this point.")}console.log("Regions fetched from backend:",this._regions)}).catch(e=>{t.show("Error fetching regions. Please ensure the backend service is running.");console.error("Error fetching regions:",e)})},onBuildingSelect:function(e){const t=e.getParameter("listItem").getBindingContext();const n=t.getProperty("ID");const o=t.getProperty("name");this.showUnitsPopup(n,o)},showUnitsPopup:function(e,n){const o=this.getView().getModel();if(!o){t.show("Error: OData model is not properly initialized.");console.error("OData model is not initialized:",o);return}const l=o.bindList(`/Buildings('${e}')/units`);l.requestContexts().then(e=>{const o=e.map(e=>e.getObject());if(o.length===0){t.show(`No units found for ${n}.`);return}const l=new sap.ui.model.json.JSONModel({Units:o});const c=new s({mode:"SingleSelectMaster",selectionChange:e=>{const t=e.getParameter("listItem").getBindingContext("unitModel").getObject();this.onUnitSelect(t,d,c,n,l)},items:{path:"unitModel>/Units",template:new r({title:"{unitModel>name}",description:"Status: {unitModel>status}",highlight:"{= ${unitModel>status} === 'reserved' ? 'Error' : 'Success' }",type:"Active"})}});const d=new i({title:`Units in ${n}`,content:c,beginButton:new a({text:"Close",press:()=>d.close()}),afterClose:()=>d.destroy()});d.setModel(l,"unitModel");d.open()}).catch(e=>{t.show("Error loading units. Please ensure the backend service is running.");console.error("Error fetching units:",e)})},onUnitSelect:function(e,t,n,o,i){const l=new s({mode:"SingleSelectMaster",selectionChange:s=>{const r=s.getParameter("listItem").getTitle();this.handleUnitAction(r,e,t,n,o,i)},items:[new r({title:"Create Reservation",type:"Active"}),new r({title:"Go to Payment",type:"Active"})]});t.setTitle(`Actions for ${e.name}`);t.removeAllContent();t.addContent(l);t.setEndButton(new a({text:"Back",press:()=>{t.setTitle(`Units in ${o}`);t.removeAllContent();t.addContent(n);t.setEndButton(null)}}))},handleUnitAction:function(e,n,o,i,s,r){const a=this.getView().getModel();if(!a||!a.submitBatch){t.show("Error: OData model is not properly initialized for updates.");console.error("OData model is not initialized or does not support updates:",a);return}if(e==="Create Reservation"){const e=a.bindContext(`/Units('${n.ID}')`,null,{$$updateGroupId:a.getUpdateGroupId()});e.initialize();const l=e.getBoundContext();if(!l){t.show("Error: Unable to resolve unit context for update.");console.error("Context not resolved:",e);return}l.setProperty("status","reserved");a.submitBatch(a.getUpdateGroupId()).then(()=>{t.show(`Reservation for ${n.name} created`);const e=r.getProperty("/Units");const a=e.findIndex(e=>e.ID===n.ID);if(a!==-1){e[a].status="reserved";r.setProperty("/Units",e)}o.setTitle(`Units in ${s}`);o.removeAllContent();o.addContent(i);o.setEndButton(null)}).catch(e=>{t.show("Error creating reservation. Please check the backend.");console.error("Error updating unit:",e);const o=r.getProperty("/Units");const i=o.findIndex(e=>e.ID===n.ID);if(i!==-1){o[i].status=n.status;r.setProperty("/Units",o)}})}else if(e==="Go to Payment"){t.show(`Navigating to payment for ${n.name}`);o.setTitle(`Units in ${s}`);o.removeAllContent();o.addContent(i);o.setEndButton(null)}}})});
},
	"real/estate/realestateui/i18n/i18n.properties":'# This is the resource bundle for real.estate.realestateui\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=App Title\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=App Title',
	"real/estate/realestateui/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"real.estate.realestateui","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.17.4","toolsId":"61a3f48e-154b-4737-b5cf-e15cb20012fd"},"crossNavigation":{"inbounds":{"realestate-display":{"semanticObject":"realestate","action":"display","title":"{{appTitle}}","subTitle":"{{appSubtitle}}","signature":{"parameters":{},"additionalParameters":"allowed"}},"realestate-ui-display":{"semanticObject":"realestate-ui","action":"display","signature":{"parameters":{},"additionalParameters":"allowed"}}}},"dataSources":{"mainService":{"uri":"odata/v4/real-estate/","type":"OData","settings":{"annotations":[],"localUri":"localService/metadata.xml","odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":true,"dependencies":{"minUI5Version":"1.135.0","libs":{"sap.m":{},"sap.ui.core":{},"sap.ui.layout":{},"sap.ui.unified":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"real.estate.realestateui.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"real.estate.realestateui.view","async":true,"viewPath":"real.estate.realestateui.view"},"routes":[{"name":"RouteView1","pattern":":?query:","target":["TargetView1"]}],"targets":{"TargetView1":{"id":"View1","name":"View1"}}},"rootView":{"viewName":"real.estate.realestateui.view.App","type":"XML","id":"App","async":true}},"sap.cloud":{"public":true,"service":"realestate"}}',
	"real/estate/realestateui/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"real/estate/realestateui/view/App.view.xml":'<mvc:View controllerName="real.estate.realestateui.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"real/estate/realestateui/view/View1.view.xml":'\n<mvc:View\n    xmlns:unified="sap.ui.unified"\n    controllerName="real.estate.realestateui.controller.View1"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    displayBlock="true"\n><Page\n        id="page"\n        title="Real Estate App"\n    ><VBox\n            id="uploadVBox"\n            class="sapUiSmallMargin"\n        ><items><Title\n                    id="uploadTitle"\n                    text="Upload Site Map Image"\n                    level="H2"\n                /><unified:FileUploader\n                    id="fileUploader"\n                    name="siteMap"\n                    uploadOnChange="false"\n                    change="onFileChange"\n                    fileType="jpg,jpeg,png"\n                    buttonText="Choose Image"\n                    width="300px"\n                /><Button\n                    id="uploadBtn"\n                    text="Upload Image"\n                    press="onUploadPress"\n                    class="sapUiSmallMarginTop"\n                /><VBox\n                    id="img"\n                    height="100%"\n                    justifyContent="Center"\n                    alignItems="Center"\n                ><Image\n                        id="siteMapImage"\n                        visible="false"\n                    /></VBox></items></VBox><VBox id="listBox"><Text\n                id="building"\n                text="Buildings"\n                class="sapUiSmallMargin"\n            /><List\n                id="buildingList"\n                items="{/Buildings}"\n                selectionChange="onBuildingSelect"\n                mode="SingleSelectMaster"\n            ><StandardListItem\n                    id="buildingItem"\n                    title="{name}"\n                    description="{location}"\n                /></List></VBox></Page></mvc:View>'
});
//# sourceMappingURL=Component-preload.js.map
